<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Cadastro de Vendedores</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
  h2 { margin-top: 20px; }
  input, button { padding: 8px; margin: 6px 0; width: 100%; box-sizing: border-box; }
  .vendedor-item { background: #fff; border: 1px solid #ccc; padding: 8px; margin-bottom: 6px; display: flex; justify-content: space-between; align-items: center; }
  .vendedor-nome { flex-grow: 1; }
  button.small { padding: 4px 8px; margin-left: 4px; }
</style>
</head>
<body>

<h2>Cadastro de Vendedor</h2>
<input type="text" id="nomeVendedor" placeholder="Nome do Vendedor" />
<input type="number" id="cotacaoVendedor" placeholder="Cota√ß√£o (R$)" step="0.01" />
<button onclick="salvarVendedor()">Salvar Vendedor</button>

<h2>Vendedores Cadastrados</h2>
<div id="listaVendedores"></div>

<script>
  let vendedores = JSON.parse(localStorage.getItem('vendedores')) || [];
  let vendedorEditandoIndex = null;

  function salvarLocalStorage() {
    localStorage.setItem('vendedores', JSON.stringify(vendedores));
  }

  function salvarVendedor() {
    const nomeInput = document.getElementById('nomeVendedor');
    const cotacaoInput = document.getElementById('cotacaoVendedor');

    const nome = nomeInput.value.trim();
    const cotacao = parseFloat(cotacaoInput.value);

    if (!nome) return alert('Informe o nome do vendedor');
    if (isNaN(cotacao)) return alert('Informe a cota√ß√£o corretamente');

    if (vendedorEditandoIndex !== null) {
      vendedores[vendedorEditandoIndex].nome = nome;
      vendedores[vendedorEditandoIndex].cotacao = cotacao;
      vendedorEditandoIndex = null;
    } else {
      const vendedorExistenteIndex = vendedores.findIndex(v => v.nome.toLowerCase() === nome.toLowerCase());
      if (vendedorExistenteIndex >= 0) {
        alert('Vendedor j√° cadastrado! Use outro nome ou edite o existente.');
        return;
      }
      vendedores.push({ nome, cotacao, vendas: [] });
    }

    salvarLocalStorage();
    listarVendedores();
    limparCamposVendedor();
  }

  function listarVendedores() {
    const container = document.getElementById('listaVendedores');
    container.innerHTML = '';
    vendedores.forEach((v, i) => {
      const div = document.createElement('div');
      div.className = 'vendedor-item';

      const nomeDiv = document.createElement('div');
      nomeDiv.className = 'vendedor-nome';
      nomeDiv.textContent = v.nome;

      const btnEditar = document.createElement('button');
      btnEditar.textContent = '‚úèÔ∏è';
      btnEditar.className = 'small';
      btnEditar.title = 'Editar vendedor';
      btnEditar.onclick = () => editarVendedor(i);

      const btnExcluir = document.createElement('button');
      btnExcluir.textContent = 'üóëÔ∏è';
      btnExcluir.className = 'small';
      btnExcluir.title = 'Excluir vendedor';
      btnExcluir.onclick = () => excluirVendedor(i);

      div.appendChild(nomeDiv);
      div.appendChild(btnEditar);
      div.appendChild(btnExcluir);

      container.appendChild(div);
    });
  }

  function editarVendedor(index) {
    vendedorEditandoIndex = index;
    const vendedor = vendedores[index];
    document.getElementById('nomeVendedor').value = vendedor.nome;
    document.getElementById('cotacaoVendedor').value = vendedor.cotacao;
  }

  function excluirVendedor(index) {
    if (!confirm(`Confirma a exclus√£o do vendedor "${vendedores[index].nome}" e todas as vendas associadas?`)) return;
    vendedores.splice(index, 1);
    salvarLocalStorage();
    listarVendedores();
  }

  function limparCamposVendedor() {
    document.getElementById('nomeVendedor').value = '';
    document.getElementById('cotacaoVendedor').value = '';
    vendedorEditandoIndex = null;
  }

  listarVendedores();
</script>

</body>
</html>
